cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = row_number()) %>%
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(data = dat_forplot, aes(x = factor(row_num), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "bottom")
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="none")
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = row_number()) %>%
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(data = dat_forplot, aes(x = factor(row_num), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "bottom")
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="bottom")
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = row_number()) %>%
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(data = dat_forplot, aes(x = factor(sample_name), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "bottom")
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(sample_name), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="bottom")
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
View(dat_forplot)
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = row_number()) %>%
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(data = dat_forplot, aes(x = factor(row_num), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "right") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
ggplot(data = dat_forplot, aes(x = factor(row_num), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "right") +
position = position_dodge2(preserve = "single")
ggplot(data = dat_forplot, aes(x = factor(row_num), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "right",
position = position_dodge2(preserve = "single"))
ggplot(data = dat_forplot, aes(x = factor(row_num), y = npoc_raw, fill = Zone)) +
geom_bar(stat = 'identity',   position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "right")
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(Zone = factor(Zone)) %>%  # re-factor within group
ungroup()
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
ggplot(dat_forplot, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
dat_forplot %>%
group_by(Site_Code, Zone) %>%
summarise(n = n(), sum_npoc = sum(npoc_raw, na.rm = TRUE))
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(Zone = factor(Zone)) %>%  # re-factor within group
ungroup()
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # factor row_num per group
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
dat_forplot2 %>%
group_by(Site_Code) %>%
summarise(levels = list(levels(row_num)))
ggplot(dat_forplot2, aes(x = sample_name, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(Zone = factor(Zone)) %>%  # re-factor within group
ungroup()
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # row_number creates numeric, factor resets levels per group
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # row_number creates numeric, factor resets levels per group
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_c_plot
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # row_number creates numeric, factor resets levels per group
ungroup()
head(dat_forplot)
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
viz_c_plot
#ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
viz_c_plot
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot2 <- dat_forplot %>%
mutate(row_num = as.numeric(as.character(row_num))) %>%  # convert factor to numeric if needed
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%
ungroup()
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot2 <- dat_forplot %>%
mutate(row_num = as.numeric(as.character(row_num))) %>%  # convert factor to numeric if needed
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%
ungroup()
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # create row_num as factor per group
ungroup()
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
#ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
print(viz_c_plot)
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # create row_num as factor per group
ungroup()
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(data = dat_forplot, aes(x = factor(row_num), y = tdn_raw , fill = Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels = c('GCW', 'MSM', 'GWI', 'SWH'))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic()  + labs(x= " ", y="TN (mg/L)", title="Nitrogen by Plot") +
theme(legend.position="right")  +
scale_x_discrete(drop = TRUE)
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
cat("Visualize Data")
#Plot samples to get a first look at concentrations (sanity check)
IDs <- data.frame(do.call('rbind', strsplit(as.character(dat_flagged$sample_name),'_',fixed=TRUE)))
colnames(IDs) <- c("Date" , "Site_Code","Zone", "Lysimeter", "Depth", "Excess_Info")
head(IDs)
#rejoin them to the dataframe
dat_forplot <- cbind(IDs, dat_flagged)
dat_forplot2 <- dat_forplot %>%
group_by(Site_Code) %>%
mutate(row_num = factor(row_number())) %>%  # create row_num as factor per group
ungroup()
#Plot data and change colors based on flags to check it:
viz_c_plot <- ggplot(dat_forplot2, aes(x = row_num, y = npoc_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
viz_n_plot <-  ggplot(dat_forplot2, aes(x = row_num, y = tdn_raw, fill = Zone)) +
geom_bar(stat = "identity", position = position_dodge2(preserve = "single")) +
facet_grid(~factor(Site_Code, levels = c("GCW", "MSM", "GWI", "SWH"))) +
scale_fill_manual(values = c(
"UP" = "#20063B",
"TR" = "#FFBC42",
"SWAMP" = "darkgrey",
"WC" = "#419973",
"SW" = "#25ABE6"
)) +
theme_classic() +
labs(x = " ", y = "NPOC (mg/L)", title = "Carbon by Plot") +
theme(legend.position = "none") +
scale_x_discrete(drop = TRUE)
ggarrange(viz_c_plot, viz_n_plot, nrow=1, ncol=2)
