sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
NOx_forplot <- df_all_clean %>%
filter(Test == "Vanadium NOx")
viz_NOx_plot <-  ggplot(data = NOx_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels=c('GCW', 'MSM', 'GWI', "SWH"))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="NOx (mg/L)", title="NOx by Site and Zone") +
theme(legend.position="none")
NH3_forplot <- df_all_clean %>%
filter(Test == "Ammonia 2")
viz_NH3_plot <- ggplot(data = NH3_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels=c('GCW', 'MSM', 'GWI', "SWH"))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="NH3 (mg/L)", title="NH3 by Site and Zone") +
theme(legend.position="none")
PO4_forplot <- df_all_clean %>%
filter(Test == "o-PHOS 0.3")
viz_PO4_plot <- ggplot(data = PO4_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site_Code, levels=c('GCW', 'MSM', 'GWI', "SWH"))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="PO4 (mg/L)", title="PO4 by Site and Zone") +
theme(legend.position="none")
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
Viz_Plots <- ggarrange(
viz_NOx_plot,
viz_NH3_plot,
viz_PO4_plot,   # (you had NH3 twice!)
nrow = 1,
ncol = 3,
common.legend = TRUE,
legend = "bottom")
df_all_clean <- samples %>%
filter(str_detect(Sample_Name, "GCW|GWI|MSM|SWH")) %>%
mutate(Run_Time = lubridate::mdy_hm(Run_Time))
mutate(separate(
samples,
col = Sample_Name,
sep = "_",
into = c("Site", "Samp_Time", "Zone", "Replicate", "Depth")
)) %>%
mutate(Samp_Time = ym(Samp_Time)) %>%
mutate(
Site = case_when(
Site == "GCW" ~ "GCReW",
Site == "GWI" ~ "Goodwin Island",
Site == "MSM" ~ "Moneystump",
Site == "SWH" ~ "Sweethall",
TRUE ~ Site),
`Zone` = case_when(
`Zone` == "UP" ~ "Upland",
`Zone` == "TR" ~ "Transition",
`Zone` == "WC" ~ "Wetland",
`Zone` == "SWAMP" ~ "Swamp",
`Zone` == "SW" ~ "Surface Water",
TRUE ~ `Zone`
))
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
df_all_clean <- samples %>%
filter(str_detect(Sample_Name, "GCW|GWI|MSM|SWH")) %>%
mutate(Run_Time = lubridate::mdy_hm(Run_Time))
mutate(separate(
col = Sample_Name,
sep = "_",
into = c("Site", "Samp_Time", "Zone", "Replicate", "Depth")
)) %>%
mutate(Samp_Time = ym(Samp_Time)) %>%
mutate(
Site = case_when(
Site == "GCW" ~ "GCReW",
Site == "GWI" ~ "Goodwin Island",
Site == "MSM" ~ "Moneystump",
Site == "SWH" ~ "Sweethall",
TRUE ~ Site),
`Zone` = case_when(
`Zone` == "UP" ~ "Upland",
`Zone` == "TR" ~ "Transition",
`Zone` == "WC" ~ "Wetland",
`Zone` == "SWAMP" ~ "Swamp",
`Zone` == "SW" ~ "Surface Water",
TRUE ~ `Zone`
))
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
df_all_clean <- samples %>%
filter(str_detect(Sample_Name, "GCW|GWI|MSM|SWH")) %>%
mutate(Run_Time = lubridate::mdy_hm(Run_Time))
separate(
col = Sample_Name,
sep = "_",
into = c("Site", "Samp_Time", "Zone", "Replicate", "Depth")) %>%
mutate(Samp_Time = ym(Samp_Time)) %>%
mutate(
Site = case_when(
Site == "GCW" ~ "GCReW",
Site == "GWI" ~ "Goodwin Island",
Site == "MSM" ~ "Moneystump",
Site == "SWH" ~ "Sweethall",
TRUE ~ Site),
`Zone` = case_when(
`Zone` == "UP" ~ "Upland",
`Zone` == "TR" ~ "Transition",
`Zone` == "WC" ~ "Wetland",
`Zone` == "SWAMP" ~ "Swamp",
`Zone` == "SW" ~ "Surface Water",
TRUE ~ `Zone`
))
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
df_all_clean <- samples %>%
filter(str_detect(Sample_Name, "GCW|GWI|MSM|SWH")) %>%
mutate(Run_Time = lubridate::mdy_hm(Run_Time)) %>%
separate(
col = Sample_Name,
sep = "_",
into = c("Site", "Samp_Time", "Zone", "Replicate", "Depth")) %>%
mutate(Samp_Time = ym(Samp_Time)) %>%
mutate(
Site = case_when(
Site == "GCW" ~ "GCReW",
Site == "GWI" ~ "Goodwin Island",
Site == "MSM" ~ "Moneystump",
Site == "SWH" ~ "Sweethall",
TRUE ~ Site),
`Zone` = case_when(
`Zone` == "UP" ~ "Upland",
`Zone` == "TR" ~ "Transition",
`Zone` == "WC" ~ "Wetland",
`Zone` == "SWAMP" ~ "Swamp",
`Zone` == "SW" ~ "Surface Water",
TRUE ~ `Zone`
))
samples %>%
filter(str_detect(Sample_Name, "GCW|GWI|MSM|SWH")) %>%
filter(str_count(Sample_Name, "_") != 4) %>%
select(Sample_Name)
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
df_all_clean <- samples %>%
filter(str_detect(Sample_Name, "GCW|GWI|MSM|SWH")) %>%
mutate(Run_Time = lubridate::mdy_hm(Run_Time)) %>%
separate(
col = Sample_Name,
sep = "_",
into = c("Site", "Samp_Time", "Zone", "Replicate", "Depth"),
remove = FALSE) %>%
mutate(Samp_Time = ym(Samp_Time)) %>%
mutate(
Site = case_when(
Site == "GCW" ~ "GCReW",
Site == "GWI" ~ "Goodwin Island",
Site == "MSM" ~ "Moneystump",
Site == "SWH" ~ "Sweethall",
TRUE ~ Site),
`Zone` = case_when(
`Zone` == "UP" ~ "Upland",
`Zone` == "TR" ~ "Transition",
`Zone` == "WC" ~ "Wetland",
`Zone` == "SWAMP" ~ "Swamp",
`Zone` == "SW" ~ "Surface Water",
TRUE ~ `Zone`
))
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
NOx_forplot <- df_all_clean %>%
filter(Test == "Vanadium NOx")
viz_NOx_plot <-  ggplot(data = NOx_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site, levels=c('GCReW', 'MSM', 'Goodwin Island', "SWH"))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="NOx (mg/L)", title="NOx by Site and Zone") +
theme(legend.position="none")
NH3_forplot <- df_all_clean %>%
filter(Test == "Ammonia 2")
viz_NH3_plot <- ggplot(data = NH3_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site, levels=c('GCReW', 'MSM', 'Goodwin Island', "SWH"))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="NH3 (mg/L)", title="NH3 by Site and Zone") +
theme(legend.position="none")
PO4_forplot <- df_all_clean %>%
filter(Test == "o-PHOS 0.3")
viz_PO4_plot <- ggplot(data = PO4_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site, levels=c('GCReW', 'MSM', 'Goodwin Island', "SWH"))) +
scale_fill_manual(values = c("UP" = "#20063B", "TR" = "#FFBC42", "SWAMP" = "darkgrey",
"WC" = "#419973", "SW" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="PO4 (mg/L)", title="PO4 by Site and Zone") +
theme(legend.position="none")
Viz_Plots <- ggarrange(
viz_NOx_plot,
viz_NH3_plot,
viz_PO4_plot,   # (you had NH3 twice!)
nrow = 1,
ncol = 3,
common.legend = TRUE,
legend = "bottom")
print(Viz_Plots)
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
NOx_forplot <- df_all_clean %>%
filter(Test == "Vanadium NOx")
viz_NOx_plot <-  ggplot(data = NOx_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site, levels=c('GCReW', 'MSM', 'Goodwin Island', "SWH"))) +
scale_fill_manual(values = c("Upland" = "#20063B", "Transition" = "#FFBC42", "Swamp" = "darkgrey",
"Wetland" = "#419973", "Surface Water" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="NOx (mg/L)", title="NOx by Site and Zone") +
theme(legend.position="none")
NH3_forplot <- df_all_clean %>%
filter(Test == "Ammonia 2")
viz_NH3_plot <- ggplot(data = NH3_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site, levels=c('GCReW', 'MSM', 'Goodwin Island', "SWH"))) +
scale_fill_manual(values = c("Upland" = "#20063B", "Transition" = "#FFBC42", "Swamp" = "darkgrey",
"Wetland" = "#419973", "Surface Water" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="NH3 (mg/L)", title="NH3 by Site and Zone") +
theme(legend.position="none")
PO4_forplot <- df_all_clean %>%
filter(Test == "o-PHOS 0.3")
viz_PO4_plot <- ggplot(data = PO4_forplot, aes(x = Zone, y = Conc, fill=Zone)) +
geom_bar(stat = 'identity') +
facet_grid(~factor(Site, levels=c('GCReW', 'MSM', 'Goodwin Island', "SWH"))) +
scale_fill_manual(values = c("Upland" = "#20063B", "Transition" = "#FFBC42", "Swamp" = "darkgrey",
"Wetland" = "#419973", "Surface Water" = "#25ABE6")) +
theme_classic() + labs(x= " ", y="PO4 (mg/L)", title="PO4 by Site and Zone") +
theme(legend.position="none")
Viz_Plots <- ggarrange(
viz_NOx_plot,
viz_NH3_plot,
viz_PO4_plot,   # (you had NH3 twice!)
nrow = 1,
ncol = 3,
common.legend = TRUE,
legend = "bottom")
print(Viz_Plots)
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
processed_data <- df_all_clean %>%
mutate(Replicate = str_replace(Lysimeter, "Lys", ""),
Depth_cm = str_replace(Depth, "cm", ""),
Year = sample_year,
Month = sample_month) %>%
mutate(
Depth_cm = if_else(Zone == "SW", "0", Depth_cm)
)  %>%
select(-c(Excess_Info, Depth, Lysimeter, Date))
#let you know which section you are in
cat("Setup")
#set the run date & user name
run_date <- "20230603"
sample_year <- 2023
sample_month <- 04
user <- "Stephanie Wilson"
#identify the files you want to read in
NOx_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NOx_April2023_1.csv"
NH3_PO4_file_1 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_April2023_1.csv"
#  NH3_PO4_file_2 <- "Raw Data/SEAL_COMPASS_Synoptic_NH3_PO4_Aug2023_2.csv"
#combine files if multople
#  NH3_PO4_file <- rbind(NH3_PO4_file_1, NH3_PO4_file_2)
# Define the file path for QAQC log file - NO Need to change just check year
file_path <- "Raw Data/SEAL_COMPASS_Synoptic_QAQC_Log_2023.csv"
final_path <- "Processed Data/COMPASS_Synoptic_Nutrients_202304.csv"
#record any notes about the run or anything other info here:
Notes <- "There are two sample names we suspect were input incorrectly, they are listed below and have been checked against metadata"
#duplicate sample names to be changed
#list the sample iDs that are messed up and create a list with the cup identifier as well so that we can change them below
wrong_names <- c("GCW_202304_TR_LysC_45cm", "GCW_202304_TR_LysA_20cm")
wrong_cups <- c("20", "13")
right_names <- c("GCW_202304_TR_LysB_45cm", "GCW_202304_TR_LysA_10cm")
#can't determine from metadata - for now unsure
issue_names <- c("GCW_202304_TR_LysA_20cm")
#couldn't tell which onethis is from the metadata, no A_10cm which is what we thought marked on the sheet, need to check sample vials in            freezer to see if we have a A_10cm from GCW_TR to be sure
issue_cups <- c("13")
processed_data <- df_all_clean %>%
mutate(Replicate = str_replace(Lys, "Lysimiter", ""),
Depth_cm = str_replace(Depth, "cm", ""),
Year = sample_year,
Month = sample_month) %>%
mutate(
Depth_cm = if_else(Zone == "SW", "0", Depth_cm)
)
